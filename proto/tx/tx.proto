syntax = "proto3";

package tx.v1;

option go_package = "nhbchain/proto/tx/v1;txv1";

// RefundThreadRequest requests the refund linkage for a given origin
// transaction hash. The hash must be provided as a hex string (with or without
// the 0x prefix).
message RefundThreadRequest {
  string origin_tx = 1;
}

// RefundThreadLink captures an individual refund entry that references the
// origin transaction. Amounts are string encoded to avoid precision loss when
// consumed by JSON/TS clients.
message RefundThreadLink {
  string refund_tx = 1;
  string amount = 2;
  uint64 timestamp = 3;
}

// RefundThreadResponse returns the aggregated refund ledger for the supplied
// origin transaction hash.
message RefundThreadResponse {
  string origin_tx = 1;
  string origin_amount = 2;
  string cumulative_refunded = 3;
  uint64 origin_timestamp = 4;
  repeated RefundThreadLink refunds = 5;
}

// Query exposes read-only methods for inspecting transaction refund metadata.
service Query {
  rpc RefundThread(RefundThreadRequest) returns (RefundThreadResponse);
}
